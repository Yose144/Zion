# Warp Workflows for ZION
workflows:
  - name: Build (Release)
    command: |
      cmake -S . -B build -DCMAKE_BUILD_TYPE=Release && cmake --build build -j
    tags: [build, cmake]
    description: Configure and build ZION in Release mode
    dir: .

  - name: Run tests
    command: ./test_zion.sh
    tags: [test]
    description: Run the full test suite
    dir: .

  - name: Capture session log
    command: bash scripts/generate_session_log.sh --title "Warp capture" --notes "Automated from Warp workflow"
    tags: [docs, warp]
    description: Create a dated session log under docs/sessions/
    dir: .

  - name: Run daemon (mainnet)
    command: ./build/ziond --config=./config/mainnet.conf
    tags: [daemon, mainnet]
    description: Start ZION daemon with mainnet config
    dir: .

  - name: Run miner (4 threads, light)
    command: ./build/zion_miner --threads 4 --light
    tags: [miner]
    description: Start miner with 4 threads in light mode
    dir: .

  - name: Genesis (compute hash)
    command: ./build/zion_genesis ./config/mainnet.conf
    tags: [genesis]
    description: Compute genesis hash using current config
    dir: .

  - name: Docker seeds up
    command: docker compose -f docker/compose.seed.yml up -d --build
    tags: [docker, seeds]
    description: Build and start two seed nodes via docker-compose
    dir: .

  - name: Package release (local)
    command: bash scripts/package.sh $(uname -s | grep -qi darwin && echo macos-latest || echo ubuntu-latest)
    tags: [release, package]
    description: Create local tar.gz package with binaries and config
    dir: .
